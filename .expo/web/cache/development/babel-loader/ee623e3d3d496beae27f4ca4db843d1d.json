{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React from 'react';\nimport { useLogger } from \"./contexts\";\nimport { useTimeout } from \"./hooks\";\nimport { noop } from \"./utils/func\";\nimport { mergeIfDefined } from \"./utils/obj\";\nexport var DEFAULT_DATA = {\n  text1: undefined,\n  text2: undefined\n};\nexport var DEFAULT_OPTIONS = {\n  type: 'success',\n  position: 'top',\n  autoHide: true,\n  visibilityTime: 4000,\n  topOffset: 40,\n  bottomOffset: 40,\n  keyboardOffset: 10,\n  onShow: noop,\n  onHide: noop,\n  onPress: noop,\n  props: {}\n};\nexport function useToast(_ref) {\n  var defaultOptions = _ref.defaultOptions;\n\n  var _useLogger = useLogger(),\n      log = _useLogger.log;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      isVisible = _React$useState2[0],\n      setIsVisible = _React$useState2[1];\n\n  var _React$useState3 = React.useState(DEFAULT_DATA),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      data = _React$useState4[0],\n      setData = _React$useState4[1];\n\n  var initialOptions = mergeIfDefined(DEFAULT_OPTIONS, defaultOptions);\n\n  var _React$useState5 = React.useState(initialOptions),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      options = _React$useState6[0],\n      setOptions = _React$useState6[1];\n\n  var onAutoHide = React.useCallback(function () {\n    log('Auto hiding');\n    setIsVisible(false);\n    options.onHide();\n  }, [log, options]);\n\n  var _useTimeout = useTimeout(onAutoHide, options.visibilityTime),\n      startTimer = _useTimeout.startTimer,\n      clearTimer = _useTimeout.clearTimer;\n\n  var hide = React.useCallback(function () {\n    log('Hiding');\n    setIsVisible(false);\n    clearTimer();\n    options.onHide();\n  }, [clearTimer, log, options]);\n  var show = React.useCallback(function (params) {\n    log(\"Showing with params: \" + JSON.stringify(params));\n    var _params$text = params.text1,\n        text1 = _params$text === void 0 ? DEFAULT_DATA.text1 : _params$text,\n        _params$text2 = params.text2,\n        text2 = _params$text2 === void 0 ? DEFAULT_DATA.text2 : _params$text2,\n        _params$type = params.type,\n        type = _params$type === void 0 ? initialOptions.type : _params$type,\n        _params$position = params.position,\n        position = _params$position === void 0 ? initialOptions.position : _params$position,\n        _params$autoHide = params.autoHide,\n        autoHide = _params$autoHide === void 0 ? initialOptions.autoHide : _params$autoHide,\n        _params$visibilityTim = params.visibilityTime,\n        visibilityTime = _params$visibilityTim === void 0 ? initialOptions.visibilityTime : _params$visibilityTim,\n        _params$topOffset = params.topOffset,\n        topOffset = _params$topOffset === void 0 ? initialOptions.topOffset : _params$topOffset,\n        _params$bottomOffset = params.bottomOffset,\n        bottomOffset = _params$bottomOffset === void 0 ? initialOptions.bottomOffset : _params$bottomOffset,\n        _params$keyboardOffse = params.keyboardOffset,\n        keyboardOffset = _params$keyboardOffse === void 0 ? initialOptions.keyboardOffset : _params$keyboardOffse,\n        _params$onShow = params.onShow,\n        onShow = _params$onShow === void 0 ? initialOptions.onShow : _params$onShow,\n        _params$onHide = params.onHide,\n        onHide = _params$onHide === void 0 ? initialOptions.onHide : _params$onHide,\n        _params$onPress = params.onPress,\n        onPress = _params$onPress === void 0 ? initialOptions.onPress : _params$onPress,\n        _params$props = params.props,\n        props = _params$props === void 0 ? initialOptions.props : _params$props;\n    setData({\n      text1: text1,\n      text2: text2\n    });\n    setOptions(mergeIfDefined(initialOptions, {\n      type: type,\n      position: position,\n      autoHide: autoHide,\n      visibilityTime: visibilityTime,\n      topOffset: topOffset,\n      bottomOffset: bottomOffset,\n      keyboardOffset: keyboardOffset,\n      onShow: onShow,\n      onHide: onHide,\n      onPress: onPress,\n      props: props\n    }));\n    setIsVisible(true);\n    onShow();\n  }, [initialOptions, log]);\n  React.useEffect(function () {\n    var autoHide = options.autoHide;\n\n    if (isVisible) {\n      if (autoHide) {\n        startTimer();\n      } else {\n        clearTimer();\n      }\n    }\n  }, [isVisible, options, startTimer, clearTimer]);\n  return {\n    isVisible: isVisible,\n    data: data,\n    options: options,\n    show: show,\n    hide: hide\n  };\n}","map":{"version":3,"sources":["/home/codenomad/Documents/flicknplayreacttv/node_modules/react-native-toast-message/lib/src/useToast.js"],"names":["React","useLogger","useTimeout","noop","mergeIfDefined","DEFAULT_DATA","text1","undefined","text2","DEFAULT_OPTIONS","type","position","autoHide","visibilityTime","topOffset","bottomOffset","keyboardOffset","onShow","onHide","onPress","props","useToast","defaultOptions","log","useState","isVisible","setIsVisible","data","setData","initialOptions","options","setOptions","onAutoHide","useCallback","startTimer","clearTimer","hide","show","params","JSON","stringify","useEffect"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT;AACA,SAASC,UAAT;AACA,SAASC,IAAT;AACA,SAASC,cAAT;AACA,OAAO,IAAMC,YAAY,GAAG;AACxBC,EAAAA,KAAK,EAAEC,SADiB;AAExBC,EAAAA,KAAK,EAAED;AAFiB,CAArB;AAIP,OAAO,IAAME,eAAe,GAAG;AAC3BC,EAAAA,IAAI,EAAE,SADqB;AAE3BC,EAAAA,QAAQ,EAAE,KAFiB;AAG3BC,EAAAA,QAAQ,EAAE,IAHiB;AAI3BC,EAAAA,cAAc,EAAE,IAJW;AAK3BC,EAAAA,SAAS,EAAE,EALgB;AAM3BC,EAAAA,YAAY,EAAE,EANa;AAO3BC,EAAAA,cAAc,EAAE,EAPW;AAQ3BC,EAAAA,MAAM,EAAEd,IARmB;AAS3Be,EAAAA,MAAM,EAAEf,IATmB;AAU3BgB,EAAAA,OAAO,EAAEhB,IAVkB;AAW3BiB,EAAAA,KAAK,EAAE;AAXoB,CAAxB;AAaP,OAAO,SAASC,QAAT,OAAsC;AAAA,MAAlBC,cAAkB,QAAlBA,cAAkB;;AAAA,mBACzBrB,SAAS,EADgB;AAAA,MACjCsB,GADiC,cACjCA,GADiC;;AAAA,wBAEPvB,KAAK,CAACwB,QAAN,CAAe,KAAf,CAFO;AAAA;AAAA,MAElCC,SAFkC;AAAA,MAEvBC,YAFuB;;AAAA,yBAGjB1B,KAAK,CAACwB,QAAN,CAAenB,YAAf,CAHiB;AAAA;AAAA,MAGlCsB,IAHkC;AAAA,MAG5BC,OAH4B;;AAIzC,MAAMC,cAAc,GAAGzB,cAAc,CAACK,eAAD,EAAkBa,cAAlB,CAArC;;AAJyC,yBAKXtB,KAAK,CAACwB,QAAN,CAAeK,cAAf,CALW;AAAA;AAAA,MAKlCC,OALkC;AAAA,MAKzBC,UALyB;;AAMzC,MAAMC,UAAU,GAAGhC,KAAK,CAACiC,WAAN,CAAkB,YAAM;AACvCV,IAAAA,GAAG,CAAC,aAAD,CAAH;AACAG,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAI,IAAAA,OAAO,CAACZ,MAAR;AACH,GAJkB,EAIhB,CAACK,GAAD,EAAMO,OAAN,CAJgB,CAAnB;;AANyC,oBAWN5B,UAAU,CAAC8B,UAAD,EAAaF,OAAO,CAACjB,cAArB,CAXJ;AAAA,MAWjCqB,UAXiC,eAWjCA,UAXiC;AAAA,MAWrBC,UAXqB,eAWrBA,UAXqB;;AAYzC,MAAMC,IAAI,GAAGpC,KAAK,CAACiC,WAAN,CAAkB,YAAM;AACjCV,IAAAA,GAAG,CAAC,QAAD,CAAH;AACAG,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAS,IAAAA,UAAU;AACVL,IAAAA,OAAO,CAACZ,MAAR;AACH,GALY,EAKV,CAACiB,UAAD,EAAaZ,GAAb,EAAkBO,OAAlB,CALU,CAAb;AAMA,MAAMO,IAAI,GAAGrC,KAAK,CAACiC,WAAN,CAAkB,UAACK,MAAD,EAAY;AACvCf,IAAAA,GAAG,2BAAyBgB,IAAI,CAACC,SAAL,CAAeF,MAAf,CAAzB,CAAH;AADuC,uBAEkbA,MAFlb,CAE/BhC,KAF+B;AAAA,QAE/BA,KAF+B,6BAEvBD,YAAY,CAACC,KAFU;AAAA,wBAEkbgC,MAFlb,CAEH9B,KAFG;AAAA,QAEHA,KAFG,8BAEKH,YAAY,CAACG,KAFlB;AAAA,uBAEkb8B,MAFlb,CAEyB5B,IAFzB;AAAA,QAEyBA,IAFzB,6BAEgCmB,cAAc,CAACnB,IAF/C;AAAA,2BAEkb4B,MAFlb,CAEqD3B,QAFrD;AAAA,QAEqDA,QAFrD,iCAEgEkB,cAAc,CAAClB,QAF/E;AAAA,2BAEkb2B,MAFlb,CAEyF1B,QAFzF;AAAA,QAEyFA,QAFzF,iCAEoGiB,cAAc,CAACjB,QAFnH;AAAA,gCAEkb0B,MAFlb,CAE6HzB,cAF7H;AAAA,QAE6HA,cAF7H,sCAE8IgB,cAAc,CAAChB,cAF7J;AAAA,4BAEkbyB,MAFlb,CAE6KxB,SAF7K;AAAA,QAE6KA,SAF7K,kCAEyLe,cAAc,CAACf,SAFxM;AAAA,+BAEkbwB,MAFlb,CAEmNvB,YAFnN;AAAA,QAEmNA,YAFnN,qCAEkOc,cAAc,CAACd,YAFjP;AAAA,gCAEkbuB,MAFlb,CAE+PtB,cAF/P;AAAA,QAE+PA,cAF/P,sCAEgRa,cAAc,CAACb,cAF/R;AAAA,yBAEkbsB,MAFlb,CAE+SrB,MAF/S;AAAA,QAE+SA,MAF/S,+BAEwTY,cAAc,CAACZ,MAFvU;AAAA,yBAEkbqB,MAFlb,CAE+UpB,MAF/U;AAAA,QAE+UA,MAF/U,+BAEwVW,cAAc,CAACX,MAFvW;AAAA,0BAEkboB,MAFlb,CAE+WnB,OAF/W;AAAA,QAE+WA,OAF/W,gCAEyXU,cAAc,CAACV,OAFxY;AAAA,wBAEkbmB,MAFlb,CAEiZlB,KAFjZ;AAAA,QAEiZA,KAFjZ,8BAEyZS,cAAc,CAACT,KAFxa;AAGvCQ,IAAAA,OAAO,CAAC;AACJtB,MAAAA,KAAK,EAALA,KADI;AAEJE,MAAAA,KAAK,EAALA;AAFI,KAAD,CAAP;AAIAuB,IAAAA,UAAU,CAAC3B,cAAc,CAACyB,cAAD,EAAiB;AACtCnB,MAAAA,IAAI,EAAJA,IADsC;AAEtCC,MAAAA,QAAQ,EAARA,QAFsC;AAGtCC,MAAAA,QAAQ,EAARA,QAHsC;AAItCC,MAAAA,cAAc,EAAdA,cAJsC;AAKtCC,MAAAA,SAAS,EAATA,SALsC;AAMtCC,MAAAA,YAAY,EAAZA,YANsC;AAOtCC,MAAAA,cAAc,EAAdA,cAPsC;AAQtCC,MAAAA,MAAM,EAANA,MARsC;AAStCC,MAAAA,MAAM,EAANA,MATsC;AAUtCC,MAAAA,OAAO,EAAPA,OAVsC;AAWtCC,MAAAA,KAAK,EAALA;AAXsC,KAAjB,CAAf,CAAV;AAeAM,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAT,IAAAA,MAAM;AACT,GAxBY,EAwBV,CAACY,cAAD,EAAiBN,GAAjB,CAxBU,CAAb;AAyBAvB,EAAAA,KAAK,CAACyC,SAAN,CAAgB,YAAM;AAAA,QACV7B,QADU,GACGkB,OADH,CACVlB,QADU;;AAElB,QAAIa,SAAJ,EAAe;AACX,UAAIb,QAAJ,EAAc;AACVsB,QAAAA,UAAU;AACb,OAFD,MAGK;AACDC,QAAAA,UAAU;AACb;AACJ;AACJ,GAVD,EAUG,CAACV,SAAD,EAAYK,OAAZ,EAAqBI,UAArB,EAAiCC,UAAjC,CAVH;AAWA,SAAO;AACHV,IAAAA,SAAS,EAATA,SADG;AAEHE,IAAAA,IAAI,EAAJA,IAFG;AAGHG,IAAAA,OAAO,EAAPA,OAHG;AAIHO,IAAAA,IAAI,EAAJA,IAJG;AAKHD,IAAAA,IAAI,EAAJA;AALG,GAAP;AAOH","sourcesContent":["import React from 'react';\nimport { useLogger } from './contexts';\nimport { useTimeout } from './hooks';\nimport { noop } from './utils/func';\nimport { mergeIfDefined } from './utils/obj';\nexport const DEFAULT_DATA = {\n    text1: undefined,\n    text2: undefined\n};\nexport const DEFAULT_OPTIONS = {\n    type: 'success',\n    position: 'top',\n    autoHide: true,\n    visibilityTime: 4000,\n    topOffset: 40,\n    bottomOffset: 40,\n    keyboardOffset: 10,\n    onShow: noop,\n    onHide: noop,\n    onPress: noop,\n    props: {}\n};\nexport function useToast({ defaultOptions }) {\n    const { log } = useLogger();\n    const [isVisible, setIsVisible] = React.useState(false);\n    const [data, setData] = React.useState(DEFAULT_DATA);\n    const initialOptions = mergeIfDefined(DEFAULT_OPTIONS, defaultOptions);\n    const [options, setOptions] = React.useState(initialOptions);\n    const onAutoHide = React.useCallback(() => {\n        log('Auto hiding');\n        setIsVisible(false);\n        options.onHide();\n    }, [log, options]);\n    const { startTimer, clearTimer } = useTimeout(onAutoHide, options.visibilityTime);\n    const hide = React.useCallback(() => {\n        log('Hiding');\n        setIsVisible(false);\n        clearTimer();\n        options.onHide();\n    }, [clearTimer, log, options]);\n    const show = React.useCallback((params) => {\n        log(`Showing with params: ${JSON.stringify(params)}`);\n        const { text1 = DEFAULT_DATA.text1, text2 = DEFAULT_DATA.text2, type = initialOptions.type, position = initialOptions.position, autoHide = initialOptions.autoHide, visibilityTime = initialOptions.visibilityTime, topOffset = initialOptions.topOffset, bottomOffset = initialOptions.bottomOffset, keyboardOffset = initialOptions.keyboardOffset, onShow = initialOptions.onShow, onHide = initialOptions.onHide, onPress = initialOptions.onPress, props = initialOptions.props } = params;\n        setData({\n            text1,\n            text2\n        });\n        setOptions(mergeIfDefined(initialOptions, {\n            type,\n            position,\n            autoHide,\n            visibilityTime,\n            topOffset,\n            bottomOffset,\n            keyboardOffset,\n            onShow,\n            onHide,\n            onPress,\n            props\n        }));\n        // TODO: validate input\n        // TODO: use a queue when Toast is already visible\n        setIsVisible(true);\n        onShow();\n    }, [initialOptions, log]);\n    React.useEffect(() => {\n        const { autoHide } = options;\n        if (isVisible) {\n            if (autoHide) {\n                startTimer();\n            }\n            else {\n                clearTimer();\n            }\n        }\n    }, [isVisible, options, startTimer, clearTimer]);\n    return {\n        isVisible,\n        data,\n        options,\n        show,\n        hide\n    };\n}\n"]},"metadata":{},"sourceType":"module"}